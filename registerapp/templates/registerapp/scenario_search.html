{% extends 'base.html' %}
{% load static %}
{% block content %}
{% load custom_filters %}

<style>
    .file-link:hover {
        color: #106DA4;
        cursor: pointer;
        text-shadow: 0 0 1px #106DA4;
    }
</style>

<div style="display: flex; justify-content: center;">

    <div style="height: 100%; width: 150rem; background-color: #FFFFFF; border-radius: 1rem; margin: 3rem; ">
        <div style="display: flex; justify-content: center; margin : 2rem;">

                <h1>Search for Logging Data</h1>

        </div>
        <div style="display: flex; justify-content: center; font-size: 1.4rem;">
            <form id="searchForm" action="{% url 'registerapp:search' %}" method="get">

                <select name="eADP">
                    <option value="">Select eADP</option>
                    <option value="eADP(eADM1)" {% if request.GET.eADP == "eADP(eADM1)" %} selected {% endif %}>eADP(eADM1)</option>
                    <option value="eADP(TCar)" {% if request.GET.eADP == "eADP(TCar)" %} selected {% endif %}>eADP(TCar)</option>
                    <option value="ETC" {% if request.GET.eADP == "ETC" %} selected {% endif %}>ETC</option>
                </select>

                <select name="project_code">
                    <option value="">Select Project Code</option>
                   <option value="eADM(LGMOT)" {% if request.GET.project_code == "eADM(LGMOT)" %}selected{% endif %}>eADM(LGMOT)</option>
                    <option value="SIeVCU(LGMOT)" {% if request.GET.project_code == "SIeVCU(LGMOT)" %}selected{% endif %}>SIeVCU(LGMOT)</option>
                    <option value="SIeVCU(HSCity)" {% if request.GET.project_code == "SIeVCU(HSCity)" %}selected{% endif %}>SIeVCU(HSCity)</option>
                    <option value="SIeVCU(TIPS)" {% if request.GET.project_code == "SIeVCU(TIPS)" %}selected{% endif %}>SIeVCU(TIPS)</option>
                    <option value="ETC" {% if request.GET.project_code == "ETC" %}selected{% endif %}>ETC</option>
                </select>

                <select name="sw_version">
                    <option value="">Select SW Version</option>
                     <option value="eChFVer0.4" {% if request.GET.sw_version == "eChFVer0.4" %}selected{% endif %}>eChFVer0.4</option>
                    <option value="eChFVer1.0" {% if request.GET.sw_version == "eChFVer1.0" %}selected{% endif %}>eChFVer1.0</option>
                    <option value="eChFVer1.1" {% if request.GET.sw_version == "eChFVer1.1" %}selected{% endif %}>eChFVer1.1</option>
                    <option value="eChFVer1.2" {% if request.GET.sw_version == "eChFVer1.2" %}selected{% endif %}>eChFVer1.2</option>
                </select>

                <select name="weather">
                    <option value="">Select Weather</option>
                    <option value="Sunny" {% if request.GET.weather == "Sunny" %}selected{% endif %}>Sunny</option>
                    <option value="Rainy" {% if request.GET.weather == "Rainy" %}selected{% endif %}>Rainy</option>
                    <option value="Cloud" {% if request.GET.weather == "Cloud" %}selected{% endif %}>Cloud</option>
                    <option value="Snow" {% if request.GET.weather == "Snow" %}selected{% endif %}>Snow</option>
                    <option value="Mist" {% if request.GET.weather == "Mist" %}selected{% endif %}>Mist</option>
                    <option value="Fog" {% if request.GET.weather == "Fog" %}selected{% endif %}>Fog</option>
                    <option value="Haze" {% if request.GET.weather == "Haze" %}selected{% endif %}>Haze</option>
                </select>

                <select name="road_type">
                    <option value="">Select Road Type</option>
                    <option value="Asphalt" {% if request.GET.road_type == "Asphalt" %}selected{% endif %}>Asphalt</option>
                    <option value="Concrete" {% if request.GET.road_type == "Concrete" %}selected{% endif %}>Concrete</option>
                    <option value="Gravel" {% if request.GET.road_type == "Gravel" %}selected{% endif %}>Gravel</option>
                    <option value="Dirt" {% if request.GET.road_type == "Dirt" %}selected{% endif %}>Dirt</option>
                </select>

                <select name="road_status">
                    <option value="">Select Road Type</option>
                    <option value="Dry" {% if request.GET.road_type == "Dry" %}selected{% endif %}>Dry</option>
                    <option value="Wet" {% if request.GET.road_type == "Wet" %}selected{% endif %}>Wet</option>
                    <option value="Snow" {% if request.GET.road_type == "Snow" %}selected{% endif %}>Snow</option>
                    <option value="Ice" {% if request.GET.road_type == "Ice" %}selected{% endif %}>Ice</option>
                </select>

                <select name="sun_status">
                    <option value="">Select Road Type</option>
                    <option value="Midday" {% if request.GET.road_type == "Midday" %}selected{% endif %}>Midday</option>
                    <option value="Dawn" {% if request.GET.road_type == "Dawn" %}selected{% endif %}>Dawn</option>
                    <option value="Sunset/Sunrise" {% if request.GET.road_type == "Sunset/Sunrise" %}selected{% endif %}>Sunset/Sunrise</option>
                    <option value="Evening" {% if request.GET.road_type == "Evening" %}selected{% endif %}>Evening</option>
                    <option value="Night" {% if request.GET.road_type == "Night" %}selected{% endif %}>Night</option>
                </select>

                <select name="test_mode">
                    <option value="">Select Road Type</option>
                    <option value="VIL" {% if request.GET.road_type == "VIL" %}selected{% endif %}>VIL</option>
                    <option value="MIL(ADT)" {% if request.GET.road_type == "MIL(ADT)" %}selected{% endif %}>MIL(ADT)</option>
                    <option value="PIL" {% if request.GET.road_type == "PIL" %}selected{% endif %}>PIL</option>
                    <option value="HIL(Morai)" {% if request.GET.road_type == "HIL(Morai)" %}selected{% endif %}>HIL(Morai)</option>
                </select>

                <select name="temperature">
                    <option value="">Select Road Type</option>
                    <option value="10°C~20°C" {% if request.GET.road_type == "10°C~20°C" %}selected{% endif %}>10°C~20°C</option>
                    <option value="<-0°C" {% if request.GET.road_type == "<-0°C" %}selected{% endif %}><-0°C</option>
                    <option value="0°C~10°C" {% if request.GET.road_type == "0°C~10°C" %}selected{% endif %}>0°C~10°C</option>
                    <option value="20°C~30°C" {% if request.GET.road_type == "20°C~30°C" %}selected{% endif %}>20°C~30°C</option>
                    <option value="30°C<" {% if request.GET.road_type == "30°C<" %}selected{% endif %}>30°C<</option>
                </select>


                 <input type="text" name="username" value="{{ request.GET.username }}" placeholder="Username">


                <input type="submit" value="Search">

                <button class="file-link" type="button" onclick="resetSearchFormAndSubmit()" style="margin-left: 10px; border: none; background-color: transparent; cursor: pointer;">
                    <i class="fas fa-sync-alt"></i> Reset
                </button>


            </form>
        </div>
        <div style="margin: 1rem;">
            <table style="border-collapse: collapse; width: 100%; border: 3px solid #0D0D0D; font-size: 1.1rem;">
                <thead style="text-align: center; background-color: #DDE4E7;">
                    <tr>
                        <th style="border: 1px solid #ddd; padding: 5px; text-align: center;">Test Case ID</th>
                        <th style="border: 1px solid #ddd; padding: 5px; text-align: center;">실험자</th>

                        <th style="border: 1px solid #ddd; padding: 5px; text-align: center;">eADP ID</th>
                        <th style="border: 1px solid #ddd; padding: 5px; text-align: center;">Project Code</th>
                        <th style="border: 1px solid #ddd; padding: 5px; text-align: center;">Location</th>

                        <th style="border: 1px solid #ddd; padding: 5px; text-align: center;">SW Version</th>
                        <th style="border: 1px solid #ddd; padding: 5px; text-align: center;">Weather</th>
                        <th style="border: 1px solid #ddd; padding: 5px; text-align: center;">Road Type</th>
                        <th style="border: 1px solid #ddd; padding: 5px; text-align: center;">Road Status</th>
                        <th style="border: 1px solid #ddd; padding: 5px; text-align: center;">Sun Status</th>
                        <th style="border: 1px solid #ddd; padding: 5px; text-align: center;">Test Mode</th>
                        <th style="border: 1px solid #ddd; padding: 5px; text-align: center;">Temperature</th>
                        <th style="border: 1px solid #ddd; padding: 5px; text-align: center;">비고</th>
                        <th style="border: 1px solid #ddd; padding: 5px; text-align: center;">File Name</th>
                        <th style="border: 1px solid #ddd; padding: 5px; text-align: center;">파일 열기</th>
                        <th style="border: 1px solid #ddd; padding: 5px; text-align: center;">작성자</th>
                    </tr>
                </thead>
                <tbody style="border: 3px solid #0D0D0D;">
                    {% for scenario in scenarios %}
                    <tr>
                        <td style="border: 1px solid #ddd; padding: 5px; text-align: center;">{{ scenario.test_case_ids }}</td>
                        <td style="border: 1px solid #ddd; padding: 5px; text-align: center;">{{ scenario.usernames }}</td>
                        <td style="border: 1px solid #ddd; padding: 5px; text-align: center;">{{ scenario.eADP }}</td>
                        <td style="border: 1px solid #ddd; padding: 5px; text-align: center;">{{ scenario.project_code }}</td>
                        <td style="border: 1px solid #ddd; padding: 5px; text-align: center;">{{ scenario.location }}</td>
                        <td style="border: 1px solid #ddd; padding: 5px; text-align: center;">{{ scenario.sw_version }}</td>
                        <td style="border: 1px solid #ddd; padding: 5px; text-align: center;">{{ scenario.weather }}</td>
                        <td style="border: 1px solid #ddd; padding: 5px; text-align: center;">{{ scenario.road_type }}</td>
                        <td style="border: 1px solid #ddd; padding: 5px; text-align: center;">{{ scenario.road_status }}</td>
                        <td style="border: 1px solid #ddd; padding: 5px; text-align: center;">{{ scenario.sun_status }}</td>
                        <td style="border: 1px solid #ddd; padding: 5px; text-align: center;">{{ scenario.test_mode }}</td>
                        <td style="border: 1px solid #ddd; padding: 5px; text-align: center;">{{ scenario.temperature }}</td>
                        <td style="border: 1px solid #ddd; padding: 5px; text-align: center;">{{ scenario.description }}</td>
                        <td style="border: 1px solid #ddd; padding: 1px; text-align: center;">{{ scenario.file_name }}</td>
                        <td style="border: 1px solid #ddd; padding: 5px; text-align: center;">
                            <a href="#"  class="file-link" onclick="redirectToLink('{{ scenario.file_name|extract_path_from_filename }}')">{{ scenario.file_name|extract_path_from_filename }}</a>
                        </td>
                        <td style="border: 1px solid #ddd; padding: 5px; text-align: center;">{{ scenario.user }}</td>
                    </tr>
                    {% empty %}
                    <tr>
                        <td colspan="13">No scenarios found.</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
</div>
<script src="{% static 'js/search.js' %}"></script>

{% endblock %}